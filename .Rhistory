pacman::p_load(pacman, tidyverse, haven, lubridate, rmarkdown, readxl, gt, gtsummary, flextable, geepack, boot, SuperLearner, survival, margins)
cohort <- read.csv("D:/VFS Classes/HRP 203/ReproMethodsAssignment2/raw-data/cohort.csv")
View(cohort)
#| label: table1
#Quick look
head(cohort)
#| label: table1
#Quick look
head(cohort)
# Continuous variables - look at distribution and summary statistics
hist(cohort$age, breaks = 100)
summary(cohort$age)
hist(cohort$cost)
summary(cohort$cost)
#| label: table1
#Quick look
head(cohort)
# Continuous variables - look at distribution and summary statistics
hist(cohort$age, breaks = 100)
summary(cohort$age)
hist(cohort$cost)
summary(cohort$cost)
# Categorical variables
table(cohort$female, useNA = "ifany")
table(cohort$smoke, useNA = "ifany")
table(tt_data$cardiac, useNA = "ifany")
#| label: table1
#Quick look
head(cohort)
# Continuous variables - look at distribution and summary statistics
hist(cohort$age, breaks = 100)
summary(cohort$age)
hist(cohort$cost)
summary(cohort$cost)
# Categorical variables
table(cohort$female, useNA = "ifany")
table(cohort$smoke, useNA = "ifany")
table(cohort$cardiac, useNA = "ifany")
#| label: table1
#Quick look
head(cohort)
# Continuous variables - look at distribution and summary statistics, check for missing
hist(cohort$age, breaks = 100)
summary(cohort$age)
hist(cohort$cost)
summary(cohort$cost)
table(is.na(cohort$age))
table(is.na(cohort$cost))
# Categorical variables
table(cohort$female, useNA = "ifany")
table(cohort$smoke, useNA = "ifany")
table(cohort$cardiac, useNA = "ifany")
#| label: table1
#Use table1 package because it's pretty straightforward
table1(~age + female + cardiac + cost | smoke,
data=cohort)
#| label: package-load
#| echo: false
#| warning: false
#Load packages
pacman::p_load(pacman, tidyverse, rmarkdown, readxl, table1, geepack)
#| label: table1
#Use table1 package because it's pretty straightforward
table1(~age + female + cardiac + cost | smoke,
data=cohort)
help(table1)
#| label: table1
#Some formatting
label(cohort$age)       <- "Age"
label(cohort$female)    <- "Female"
label(cohort$cost)      <- "Cost"
label(cohort$smoke)     <- "Smoker"
#Use table1 package because it's pretty straightforward
table1(~age + female + cardiac + cost | smoke,
data=cohort)
#| label: table1
#Some formatting
label(cohort$age)       <- "Age"
label(cohort$female)    <- "Female"
label(cohort$cost)      <- "Cost"
label(cohort$cardiac)   <- "Cardiac"
label(cohort$smoke)     <- "Smoker"
#Use table1 package because it's pretty straightforward
table1(~age + female + cardiac + cost | smoke,
data=cohort)
#| label: table1
#Some formatting
label(cohort$age)       <- "Age"
label(cohort$female)    <- "Female"
label(cohort$cost)      <- "Cost"
label(cohort$cardiac)   <- "Cardiac"
label(cohort$smoke)     <- "Smoker"
levels(cohort$smoke) <- c("Nonsmoker", "Smoker")
#Use table1 package because it's pretty straightforward
table1(~age + female + cardiac + cost | smoke,
data=cohort, overall=c(left="Total"))
#| label: table1
#Some formatting
label(cohort$age)       <- "Age"
label(cohort$female)    <- "Female"
label(cohort$cost)      <- "Cost"
label(cohort$cardiac)   <- "Cardiac"
label(cohort$smoke)     <- "Smoker"
cohort$smoke <-
factor(cohort$smoke, levels=c(0,1),
labels=c("Nonsmoker",
"Smoker"))
#Use table1 package because it's pretty straightforward
table1(~age + female + cardiac + cost | smoke,
data=cohort, overall=c(left="Total"))
#| label: table1
#Some formatting
label(cohort$age)       <- "Age (years)"
label(cohort$female)    <- "Female"
label(cohort$cost)      <- "Cost (USD)"
label(cohort$cardiac)   <- "Cardiac"
label(cohort$smoke)     <- "Smoker"
cohort$smoke <-
factor(cohort$smoke, levels=c(0,1),
labels=c("Nonsmoker",
"Smoker"))
#Use table1 package because it's pretty straightforward
table1(~age + female + cardiac + cost | smoke,
data=cohort, overall=c(left="Total"))
#| label: table1
#Some formatting
label(cohort$age)       <- "Age"
label(cohort$female)    <- "Female"
label(cohort$cost)      <- "Cost"
label(cohort$cardiac)   <- "Cardiac"
label(cohort$smoke)     <- "Smoker"
cohort$smoke <-
factor(cohort$smoke, levels=c(0,1),
labels=c("Nonsmoker",
"Smoker"))
units(cohort$age)       <- "years"
units(cohort$cost)      <- "USD"
#Use table1 package because it's pretty straightforward
table1(~age + female + cardiac + cost | smoke,
data=cohort, overall=c(left="Total"))
#| label: table1
#Some formatting
label(cohort$age)       <- "Age"
label(cohort$female)    <- "Female"
label(cohort$cost)      <- "Cost"
label(cohort$cardiac)   <- "Cardiac"
label(cohort$smoke)     <- "Smoker"
cohort$smoke <-
factor(cohort$smoke, levels=c(0,1),
labels=c("Nonsmoker",
"Smoker"))
#Use table1 package because it's pretty straightforward
table1(~age + female + cardiac + cost | smoke,
data=cohort, overall=c(left="Total"))
#| label: package-load
#| echo: false
#| warning: false
#Load packages
pacman::p_load(pacman, tidyverse, rmarkdown, readxl, table1, geepack)
#| label: package-load
#| echo: false
#| warning: false
#Load packages
pacman::p_load(pacman, tidyverse, rmarkdown, readxl, table1, geepack)
#| label: data-load
#Load data
cohort <- read.csv("D:/VFS Classes/HRP 203/ReproMethodsAssignment2/raw-data/cohort.csv")
#| label: look
#Quick look
head(cohort)
# Continuous variables - look at distribution and summary statistics, check for missing
hist(cohort$age, breaks = 100)
summary(cohort$age)
hist(cohort$cost)
summary(cohort$cost)
table(is.na(cohort$age))
table(is.na(cohort$cost))
# Categorical variables
table(cohort$female, useNA = "ifany")
table(cohort$smoke, useNA = "ifany")
table(cohort$cardiac, useNA = "ifany")
#| label: table1
#Some formatting
label(cohort$age)       <- "Age"
label(cohort$female)    <- "Female"
label(cohort$cost)      <- "Cost"
label(cohort$cardiac)   <- "Cardiac"
label(cohort$smoke)     <- "Smoker"
cohort$smoke <-
factor(cohort$smoke, levels=c(0,1),
labels=c("Nonsmoker",
"Smoker"))
#Use table1 package because it's pretty straightforward
table1(~age + female + cardiac + cost | smoke,
data=cohort, overall=c(left="Total"))
#| label: figure1
#Use ggplot2
ggplot(cohort, aes(x = smoke, y = cost, fill = sex)) +
geom_boxplot(alpha = 0.5, show.legend = FALSE) + #Make colors slightly transparent and suppress legend
labs(
x = "Smoking Status",
y = "Cost (USD)",
title = "Cost by Smoking Status"
) +
theme_minimal() +  # White background
scale_fill_manual(values = c("blue", "darkgreen"))
#| label: package-load
#| echo: false
#| warning: false
#Load packages
pacman::p_load(pacman, tidyverse, rmarkdown, readxl, table1, ggplot2, geepack)
#| label: figure1
#Use ggplot2
ggplot(cohort, aes(x = smoke, y = cost, fill = smoke)) +
geom_boxplot(alpha = 0.5, show.legend = FALSE) + #Make colors slightly transparent and suppress legend
labs(
x = "Smoking Status",
y = "Cost (USD)",
title = "Cost by Smoking Status"
) +
theme_minimal() +  # White background
scale_fill_manual(values = c("blue", "darkgreen"))
#| label: figure1
#Cost by smoking status
ggplot(cohort, aes(x = smoke, y = cost, fill = smoke)) +
geom_boxplot(alpha = 0.5, show.legend = FALSE) + #Make colors slightly transparent and suppress legend
labs(
x = "Smoking Status",
y = "Cost (USD)",
title = "Cost by Smoking Status"
) +
theme_minimal() +  # White background
scale_fill_manual(values = c("blue", "darkgreen")) +
theme(
plot.title = element_text(hjust = 0.5),  # Center the title
)
#Age and cost scatter
ggplot(cohort, aes(x = age, y = cost)) +
geom_point(color = "blue", alpha = 0.7) +
labs(
x = "Age (years)",
y = "Cost (USD)",
title = "Age versus Cost)",
) +
theme_minimal() +
theme(
plot.title = element_text(hjust = 0.5),  # Center the title
)
#| label: figure1
#Cost by smoking status
ggplot(cohort, aes(x = smoke, y = cost, fill = smoke)) +
geom_boxplot(alpha = 0.5, show.legend = FALSE) + #Make colors slightly transparent and suppress legend
labs(
x = "Smoking Status",
y = "Cost (USD)",
title = "Cost by Smoking Status"
) +
theme_minimal() +  # White background
scale_fill_manual(values = c("blue", "darkgreen")) +
theme(
plot.title = element_text(hjust = 0.5),  # Center the title
)
#Cost by gender
ggplot(cohort, aes(x = female, y = cost, fill = female)) +
geom_boxplot(alpha = 0.5, show.legend = FALSE) + #Make colors slightly transparent and suppress legend
labs(
x = "Female",
y = "Cost (USD)",
title = "Cost by Gender"
) +
theme_minimal() +  # White background
scale_fill_manual(values = c("blue", "darkgreen")) +
theme(
plot.title = element_text(hjust = 0.5),  # Center the title
)
#Age and cost scatter
ggplot(cohort, aes(x = age, y = cost)) +
geom_point(color = "blue", alpha = 0.7) +
labs(
x = "Age (years)",
y = "Cost (USD)",
title = "Age versus Cost",
) +
theme_minimal() +
theme(
plot.title = element_text(hjust = 0.5),  # Center the title
)
#| label: table1
#Some formatting
label(cohort$age)       <- "Age"
label(cohort$female)    <- "Female"
label(cohort$cost)      <- "Cost"
label(cohort$cardiac)   <- "Cardiac"
label(cohort$smoke)     <- "Smoker"
cohort$smoke <-
factor(cohort$smoke, levels=c(0,1),
labels=c("Nonsmoker",
"Smoker"))
cohort$female <-
factor(cohort$female, levels=c(0,1),
labels=c("Male",
"Female"))
#Use table1 package because it's pretty straightforward
table1(~age + female + cardiac + cost | smoke,
data=cohort, overall=c(left="Total"))
table(cohort$smoke, useNA = "ifany")
#| label: package-load
#| echo: false
#| warning: false
#Load packages
pacman::p_load(pacman, tidyverse, rmarkdown, readxl, table1, ggplot2, geepack)
#| label: package-load
#| echo: false
#| warning: false
#Load packages
pacman::p_load(pacman, tidyverse, rmarkdown, readxl, table1, ggplot2, geepack)
#| label: data-load
#Load data
cohort <- read.csv("D:/VFS Classes/HRP 203/ReproMethodsAssignment2/raw-data/cohort.csv")
#| label: look
#Quick look
head(cohort)
# Continuous variables - look at distribution and summary statistics, check for missing
hist(cohort$age, breaks = 100)
summary(cohort$age)
hist(cohort$cost)
summary(cohort$cost)
table(is.na(cohort$age))
table(is.na(cohort$cost))
# Categorical variables
table(cohort$female, useNA = "ifany")
table(cohort$smoke, useNA = "ifany")
table(cohort$cardiac, useNA = "ifany")
#| label: table1
#Some formatting
label(cohort$age)       <- "Age"
label(cohort$female)    <- "Female"
label(cohort$cost)      <- "Cost"
label(cohort$cardiac)   <- "Cardiac"
label(cohort$smoke)     <- "Smoker"
cohort$smoke <-
factor(cohort$smoke, levels=c(0,1),
labels=c("Nonsmoker",
"Smoker"))
cohort$female <-
factor(cohort$female, levels=c(0,1),
labels=c("Male",
"Female"))
#Use table1 package because it's pretty straightforward
table1(~age + female + cardiac + cost | smoke,
data=cohort, overall=c(left="Total"))
#| label: data-load
#Load data
cohort <- read.csv("D:/VFS Classes/HRP 203/ReproMethodsAssignment2/raw-data/cohort.csv")
#| label: look
#Quick look
head(cohort)
# Continuous variables - look at distribution and summary statistics, check for missing
hist(cohort$age, breaks = 100)
summary(cohort$age)
hist(cohort$cost)
summary(cohort$cost)
table(is.na(cohort$age))
table(is.na(cohort$cost))
# Categorical variables
table(cohort$female, useNA = "ifany")
table(cohort$smoke, useNA = "ifany")
table(cohort$cardiac, useNA = "ifany")
#| label: table1
#Some formatting
cohort$smoke <-
factor(cohort$smoke, levels=c(0,1),
labels=c("Nonsmoker",
"Smoker"))
cohort$female <-
factor(cohort$female, levels=c(0,1),
labels=c("Male",
"Female"))
label(cohort$age)       <- "Age"
label(cohort$female)    <- "Female"
label(cohort$cost)      <- "Cost"
label(cohort$cardiac)   <- "Cardiac"
label(cohort$smoke)     <- "Smoker"
#Use table1 package because it's pretty straightforward
table1(~age + female + cardiac + cost | smoke,
data=cohort, overall=c(left="Total"))
#| label: table1
#Some formatting
cohort$smoke <-
factor(cohort$smoke, levels=c(0,1),
labels=c("Nonsmoker",
"Smoker"))
cohort$female <-
factor(cohort$female, levels=c(0,1),
labels=c("Male",
"Female"))
cohort$cardiac <-
factor(cohort$cardiac, levels=c(0,1),
labels=c("No",
"Yes"))
label(cohort$age)       <- "Age"
label(cohort$female)    <- "Female"
label(cohort$cost)      <- "Cost"
label(cohort$cardiac)   <- "Cardiac"
label(cohort$smoke)     <- "Smoker"
#Use table1 package because it's pretty straightforward
table1(~age + female + cardiac + cost | smoke,
data=cohort, overall=c(left="Total"))
#| label: package-load
#| echo: false
#| warning: false
#Load packages
pacman::p_load(pacman, tidyverse, rmarkdown, readxl, table1, ggplot2, geepack)
#| label: data-load
#Load data
cohort <- read.csv("D:/VFS Classes/HRP 203/ReproMethodsAssignment2/raw-data/cohort.csv")
#| label: look
#Quick look
head(cohort)
# Continuous variables - look at distribution and summary statistics, check for missing
hist(cohort$age, breaks = 100)
summary(cohort$age)
hist(cohort$cost)
summary(cohort$cost)
table(is.na(cohort$age))
table(is.na(cohort$cost))
# Categorical variables
table(cohort$female, useNA = "ifany")
table(cohort$smoke, useNA = "ifany")
table(cohort$cardiac, useNA = "ifany")
#| label: table1
#Some formatting
cohort$smoke <-
factor(cohort$smoke, levels=c(0,1),
labels=c("Nonsmoker",
"Smoker"))
cohort$female <-
factor(cohort$female, levels=c(0,1),
labels=c("Male",
"Female"))
cohort$cardiac <-
factor(cohort$cardiac, levels=c(0,1),
labels=c("No",
"Yes"))
label(cohort$age)       <- "Age"
label(cohort$female)    <- "Female"
label(cohort$cost)      <- "Cost"
label(cohort$cardiac)   <- "Cardiac"
label(cohort$smoke)     <- "Smoker"
#Use table1 package because it's pretty straightforward
table1(~age + female + cardiac + cost | smoke,
data=cohort, overall=c(left="Total"))
#| label: figure1
#Cost by smoking status
ggplot(cohort, aes(x = smoke, y = cost, fill = smoke)) +
geom_boxplot(alpha = 0.5, show.legend = FALSE) + #Make colors slightly transparent and suppress legend
labs(
x = "Smoking Status",
y = "Cost (USD)",
title = "Cost by Smoking Status"
) +
theme_minimal() +  # White background
scale_fill_manual(values = c("blue", "darkgreen")) +
theme(
plot.title = element_text(hjust = 0.5),  # Center the title
)
#Cost by gender
ggplot(cohort, aes(x = female, y = cost, fill = female)) +
geom_boxplot(alpha = 0.5, show.legend = FALSE) + #Make colors slightly transparent and suppress legend
labs(
x = "Female",
y = "Cost (USD)",
title = "Cost by Gender"
) +
theme_minimal() +  # White background
scale_fill_manual(values = c("blue", "darkgreen")) +
theme(
plot.title = element_text(hjust = 0.5),  # Center the title
)
#Age and cost scatter
ggplot(cohort, aes(x = age, y = cost)) +
geom_point(color = "blue", alpha = 0.7) +
labs(
x = "Age (years)",
y = "Cost (USD)",
title = "Age versus Cost",
) +
theme_minimal() +
theme(
plot.title = element_text(hjust = 0.5),  # Center the title
)
#| label: regression
#Regression
adj_model <- glm(cost ~ age + female + smoke + cardiac, data=cohort, family = binomial)
#| label: regression
#Regression
adj_model <- glm(cost ~ age + female + smoke + cardiac, data=cohort, family = linear)
library(here)
#| label: regression
#Regression
adj_model <- lm(cost ~ age + female + smoke + cardiac, data=cohort)
exp(confint(adj_model))
#| label: regression
#Regression
adj_model <- lm(cost ~ age + female + smoke + cardiac, data=cohort)
exp(coef(adj_model))
exp(confint(adj_model))
#| label: regression
#Regression
adj_model <- lm(cost ~ age + female + smoke + cardiac, data=cohort)
coef(adj_model)
confint(adj_model)
